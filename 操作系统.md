# 操作系统笔记

## 第三章 进程与线程

### 线程

#### 一、线程的基本概念

1. 21
2. 21
3. 引入线程的好处
   1. 创建线程花费时间少
   2. 线程之间切换花费时间少
   3. 线程之间通信无需内核，不需要额外的通信机制，使通信简单，信息传送速度快

#### 二、进程和线程的比较

1. 调度

   线程作为调度的基本单位，同进程中，线程切换不引起进程切换，当不同的进程的线程切换时才引起进程的切换

2. 并发性

   一个进程间的多个线程可并发，不同进程的多个线程也可以并发执行

3. 拥有资源

   线程仅拥有进程的资源，<font color="red">进程拥有资源的独立单位</font>

4. 系统开销

   线程低，进程高

#### 三、线程实现机制

1. 用户级线程

   仅存用户空间，由用户层的线程库提供现成的创建、撤销、切换、以及线程之间的同步与通信等的支持，而无需内核的支持。

2. 内核级线程

   由os直接支持，更灵活、更方便

3. 混合方式

#### 四、进程调度

1. 进程调度的主要功能

   1. 记录所有的进程的执行状态
   2. 根据一定的调度算法，从就绪队列选出一个进程，准备将CPIU分配给他
   3. 分配CPU

2. ##### 进程调度的时机

   ###### 正在执行的进程完毕、进程阻塞、创建新的进程、等待的进程激活了、时间片完、进程出错了

3. 进程调度的方式

   1. 抢占式调度

      允许调度程序根据某种原则，去暂停某个正在执行的进程，将已分配的CPU分配给另一个进程

      抢占方式能够满足实时任务的需求，但是比较复杂且开销大

   2. 非抢占式调度

      一旦分配某个进程之后，就不会因为其他例如：时钟中断、或其他的非程序本身原因去抢占该正在运行进程的处理机，直到该进程完成或进程被阻塞 才会把处理机分配给其他进程

4. 调度算法设计原则

   1. 进程行为

      I/O密集型和计算密集型

   2. 系统分类

      批处理、实时系统、交互系统

   3. 调度算法的设计目标

      共同目标：资源利用率高，公平，平衡，强制执行策略

      批处理目标：平均周转时间短、系统吞吐量高、处理机利用率好

      分时系统目标：响应时间快、均衡性

      实时系统目标：截至时间的保证、可预测性

5. 进程调度算法

   1. 先来先服务

      缺点：没有考虑优先级的问题

   2. 最短进程优先

   3. 最短剩余时间有限算法

   4. 最高响应比优先算法

      响应比RP=1+等待时间/预计运行时间

   5. 轮转算法

   6. 最高优先级算法

   7. 多级反馈队列算法